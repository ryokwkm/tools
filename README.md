
# filecat

**ファイルリストに基づき、複数のファイルの内容を一つに連結するツールです。** 各ファイルの内容の前に、Go言語のimport文のような形式に整形したパスをヘッダーとして追加します。LLM（大規模言語モデル）へのプロンプト作成や、複数ファイルにまたがるコードレビューの準備に役立ちます。

-----

## 主な機能

- **ファイル連結**: 複数のファイルやディレクトリを指定して、中のテキストファイルを1つにまとめます。
- **パス整形**: 各ファイルパスを、指定したプロジェクトディレクトリを基準とした形式（例: `/project_name/path/to/file`）に自動で整形します。
- **モード切替**: 結果を標準出力に表示するか、ファイルに保存するかを引数の有無で切り替えられます。
- **自動スキップ**: テキストファイル以外（バイナリファイルなど）は自動で処理から除外します。

-----

## セットアップ

1.  スクリプトを `filecat` という名前で保存します。
2.  ターミナルで実行権限を付与します。
    ```bash
    chmod +x filecat
    ```

-----

## 使い方

### 1\. 処理対象リストの作成

まず、連結したいファイルやディレクトリのパスを記述したリストファイル（例: `filepath.txt`）を作成します。

```
/path/to/your_project/main.go
/path/to/your_project/models/
```

### 2\. コマンドの実行

#### 標準出力モード

入力ファイルを引数に指定すると、結果を\*\*画面（標準出力）\*\*に表示します。他のコマンドと組み合わせる際に便利です。

- **コマンド**: `./filecat [入力ファイルパス]`
- **使用例**: `./filecat filepath.txt | pbcopy` (結果をクリップボードにコピー)

#### ファイル出力モード

引数なしで実行すると、**デフォルトの入力ファイル**を読み込み、**デフォルトの出力ファイル**に結果を保存します。

- **コマンド**: `./filecat`
- **デフォルト設定**:
    - **入力**: `~/source/filecat/filepath.txt`
    - **出力**: `~/source/filecat/files.txt`

-----

## 設定

スクリプト内の設定を編集することで、動作をカスタマイズできます。

### パス整形の基準ディレクトリ

`search_dirs` 配列にプロジェクトのルートディレクトリ名などを指定することで、パスの整形方法を制御できます。

```bash
# filecat スクリプトの内部

# パス整形の基準となるディレクトリ名のリスト
local search_dirs=(
  "your_project_root_dir_name"
  "another_project_name"
)
```

この設定により、以下のようにパスが変換されます。

- **変換前**: `/home/user/dev/project_A/your_project_root_dir_name/src/main.js`
- **変換後**: `/project_A/src/main.js`